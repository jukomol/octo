# Deployment Guide

## GitHub Pages Setup

This website is designed to deploy automatically to GitHub Pages using GitHub Actions.

### Initial Setup

1. **Enable GitHub Pages**
   - Go to repository Settings
   - Navigate to Pages section
   - Source: GitHub Actions
   - No custom domain needed (uses `username.github.io/repo`)

2. **Configure Workflows**
   - Ensure workflows are enabled in Settings → Actions
   - Both sync.yml and build.yml should be visible

3. **Set Permissions**
   - Settings → Actions → General
   - Workflow permissions: "Read and write permissions"
   - Allow GitHub Actions to create and approve pull requests: ✓

### Deployment Process

#### Automatic Deployment

The site deploys automatically:

1. Push changes to `main` branch
2. Build workflow triggers
3. Site builds and deploys to GitHub Pages
4. Visit `https://yourusername.github.io/repo`

#### Manual Deployment

Trigger manually:

1. Go to Actions tab
2. Select "Build and Deploy" workflow
3. Click "Run workflow"
4. Select branch (usually `main`)
5. Click "Run workflow" button

### Deployment Checklist

Before merging to main:

- [ ] Test build locally: `bundle exec jekyll build`
- [ ] Verify all pages render correctly
- [ ] Check for broken links
- [ ] Validate YAML in data files
- [ ] Test responsive design
- [ ] Review accessibility
- [ ] Check SEO tags

### Custom Domain (Optional)

To use a custom domain:

1. **Add CNAME record in DNS**
   ```
   CNAME   @   yourusername.github.io
   ```

2. **Configure in GitHub**
   - Settings → Pages
   - Custom domain: `yourdomain.com`
   - Enforce HTTPS: ✓

3. **Update _config.yml**
   ```yaml
   url: "https://yourdomain.com"
   baseurl: ""
   ```

4. **Update _data/site.yml**
   ```yaml
   url: "https://yourdomain.com"
   ```

### Monitoring Deployment

#### Check Deployment Status

1. Actions tab shows workflow runs
2. Green checkmark = successful deployment
3. Red X = failed deployment

#### View Deployment Details

Click on workflow run to see:
- Build logs
- Deployment status
- Any errors or warnings

#### Common Deployment Issues

**Build Fails**
- Check build logs in Actions tab
- Verify Jekyll syntax is valid
- Ensure all dependencies are listed

**Site Not Updating**
- Check if build workflow completed
- Clear browser cache
- Wait a few minutes for propagation

**404 Errors**
- Verify baseurl in _config.yml
- Check file paths are correct
- Ensure pages are in correct directories

### Rollback

To rollback to a previous version:

1. Find the last working commit
2. Create new branch from that commit
3. Push to main or create PR

```bash
git checkout <commit-hash>
git checkout -b rollback
git push origin rollback
# Then merge rollback to main
```

### Environment Variables

The build workflow uses:
- `GITHUB_TOKEN`: Automatically provided
- No additional secrets needed

The sync workflow needs:
- `GITHUB_TOKEN`: Automatically provided
- Permissions: Read issues, Write contents

### Workflow Files

#### build.yml
- Builds Tailwind CSS
- Builds Jekyll site
- Deploys to GitHub Pages

#### sync.yml
- Fetches GitHub Issues
- Parses content
- Commits to repository

### Performance Optimization

GitHub Pages includes:
- Automatic CDN
- HTTPS by default
- Caching headers

Additional optimizations:
- Minified CSS (via Tailwind)
- Compressed assets
- Lazy loading (can be added)

### Security

- Uses GitHub-hosted runners
- Secrets managed by GitHub
- HTTPS enforced
- Dependabot for updates (optional)

### Support

For deployment issues:
- Check GitHub Pages status
- Review workflow logs
- Check GitHub Actions documentation
- Open issue in repository

## Post-Deployment

After successful deployment:

1. Visit site URL
2. Test all pages
3. Verify mobile responsiveness
4. Check browser console for errors
5. Test external links
6. Verify SEO tags (view source)
7. Submit sitemap to Google Search Console (optional)

### Search Engine Optimization

After deployment:

1. **Google Search Console**
   - Add property
   - Verify ownership
   - Submit sitemap: `https://yourdomain.com/sitemap.xml`

2. **Robots.txt**
   - Already generated by Jekyll
   - Located at `/robots.txt`

3. **RSS Feed**
   - Available at `/feed.xml`
   - Add to feed directories if desired

### Analytics (Optional)

To add analytics:

1. **Google Analytics**
   - Get tracking ID
   - Add to `_includes/head.html`

2. **Plausible Analytics**
   - More privacy-friendly alternative
   - Add script to `_includes/head.html`

3. **Simple Analytics**
   - Another privacy-focused option
   - Add script to `_includes/head.html`

## Maintenance

### Regular Updates

- Update Ruby gems: `bundle update`
- Update Node packages: `npm update`
- Review Dependabot PRs
- Test after updates

### Monitoring

- Check for broken links monthly
- Review analytics (if configured)
- Update content regularly
- Backup important data

### Backup Strategy

All content is in Git:
- Regular commits preserve history
- GitHub stores all versions
- Clone repository for local backup
- Export issues if needed
